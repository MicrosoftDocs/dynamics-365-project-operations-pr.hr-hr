---
title: Sinkronizacija ugovora o projektu i projekata izravno s usluge Project Service Automation na uslugu Finance and Operations
description: U ovoj se temi opisuje predložak i temeljni zadaci koji se upotrebljavaju za sinkronizaciju ugovora o projektu i projekata izravno iz sustava Microsoft Dynamics 365 Project Service Automation u uslugu Dynamics 365 Finance.
author: KimANelson
manager: AnnBe
ms.date: 09/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: 57fe4ae8-6ee9-442d-9933-d525b5415db8
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: b914a56b306639253a8cd3b7caa754da175b6df2
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: hr-HR
ms.lasthandoff: 03/24/2020
ms.locfileid: "3750075"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance-and-operations"></a><span data-ttu-id="b91d0-103">Sinkronizacija ugovora o projektu i projekata izravno s usluge Project Service Automation na uslugu Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="b91d0-103">Synchronize project contracts and projects directly from Project Service Automation to Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="b91d0-104">U ovoj se temi opisuje predložak i temeljni zadaci koji se upotrebljavaju za sinkronizaciju ugovora o projektu i projekata izravno iz sustava Dynamics 365 Project Service Automation u uslugu Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="b91d0-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="b91d0-105">Ako upotrebljavate verziju Enterprise Edition 7.3.0, morate instalirati zakrpu KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="b91d0-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="b91d0-106">Tijek podataka s usluge Project Service Automation na Financije</span><span class="sxs-lookup"><span data-stu-id="b91d0-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="b91d0-107">Prije nego što budete mogli upotrebljavati rješenje integracije iz usluge Project Service Automation na Financije, trebali biste se upoznati sa značajkom integracije podataka sustava Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="b91d0-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="b91d0-108">Rješenje za integraciju usluge Project Service Automation u Financije upotrebljava značajku Integracija podataka za sinkronizaciju podataka diljem instanci aplikacija Project Service Automation i Financije.</span><span class="sxs-lookup"><span data-stu-id="b91d0-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="b91d0-109">Predložak integracije koji je dostupan uz značajku Integracija podataka omogućuje tijek podataka o ugovorima o projektu, projektima, redcima ugovora o projektu i kontrolnim točkama redaka ugovora o projektu iz usluge Project Service Automation u Financije.</span><span class="sxs-lookup"><span data-stu-id="b91d0-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="b91d0-110">Na slijedećoj slici prikazan je način na koji se podaci sinkroniziraju između usluge Project Service Automation i Financija.</span><span class="sxs-lookup"><span data-stu-id="b91d0-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="b91d0-111">[![Tijek podataka za integraciju usluge Project Service Automation s Financijama](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="b91d0-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="b91d0-112">Predlošci i zadaci</span><span class="sxs-lookup"><span data-stu-id="b91d0-112">Templates and tasks</span></span>

<span data-ttu-id="b91d0-113">Kako biste pristupili dostupnim predlošcima, u centru za administratore platforme Microsoft Power Apps odaberite **Projekti**, a zatim u gornjem desnom kutu odaberite **Novi projekt** za odabir javnih predložaka.</span><span class="sxs-lookup"><span data-stu-id="b91d0-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="b91d0-114">Predlošci u nastavku i temeljni zadaci upotrebljavaju se za sinkronizaciju ugovora o projektu i projekata iz usluge Project Service Automation u Financije:</span><span class="sxs-lookup"><span data-stu-id="b91d0-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="b91d0-115">Integriranje s aplikacijom Dynamics 365 Project Service Automation v2.x</span><span class="sxs-lookup"><span data-stu-id="b91d0-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="b91d0-116">**Naziv predloška u Integraciji podataka:** Projekti i ugovori (PSA u Fin i Ops)</span><span class="sxs-lookup"><span data-stu-id="b91d0-116">**Name of the template in Data integration:** Projects and contracts (PSA to Fin and Ops)</span></span>
- <span data-ttu-id="b91d0-117">**Naziv zadataka u projektu:**</span><span class="sxs-lookup"><span data-stu-id="b91d0-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="b91d0-118">PSA u Fin i Ops ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-118">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="b91d0-119">PSA u Fin i Ops projekata</span><span class="sxs-lookup"><span data-stu-id="b91d0-119">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="b91d0-120">PSA u Fin i Ops redaka ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-120">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="b91d0-121">PSA u Fin i Ops kontrolnih točaka redaka ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-121">Project contract line milestones PSA to Fin and Ops</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="b91d0-122">Integriranje s aplikacijom Dynamics 365 Project Service Automation v3.x</span><span class="sxs-lookup"><span data-stu-id="b91d0-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="b91d0-123">U aplikaciji Project Service Automation dolazi do promjene sheme koja utječe na predložak kontrolne točke retka ugovora o projektu, a za integraciju aplikacije Project Service Automation v3.x sa sustavom Dynamics 365 potrebna je uporaba v2 verzije predloška.</span><span class="sxs-lookup"><span data-stu-id="b91d0-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="b91d0-124">**Naziv predloška u Integraciji podataka:** Projekti i Ugovori (PSA 3.x za Fin i Ops) – v2</span><span class="sxs-lookup"><span data-stu-id="b91d0-124">**Name of the template in Data integration:** Projects and Contracts (PSA 3.x to Fin and Ops) - v2</span></span>
- <span data-ttu-id="b91d0-125">**Naziv zadataka u projektu:**</span><span class="sxs-lookup"><span data-stu-id="b91d0-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="b91d0-126">PSA u Fin i Ops ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-126">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="b91d0-127">PSA u Fin i Ops projekata</span><span class="sxs-lookup"><span data-stu-id="b91d0-127">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="b91d0-128">PSA u Fin i Ops redaka ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-128">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="b91d0-129">PSA u Fin i Ops kontrolnih točaka redaka ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-129">Project contract line milestones PSA to Fin and Ops</span></span>

<span data-ttu-id="b91d0-130">Prije nego što dođe do sinkronizacije ugovora o projektu i projekata, morate sinkronizirati račune.</span><span class="sxs-lookup"><span data-stu-id="b91d0-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="b91d0-131">Postavljanje entiteta</span><span class="sxs-lookup"><span data-stu-id="b91d0-131">Entity set</span></span>

| <span data-ttu-id="b91d0-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="b91d0-132">Project Service Automation</span></span>       | <span data-ttu-id="b91d0-133">Financije</span><span class="sxs-lookup"><span data-stu-id="b91d0-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="b91d0-134">Narudžbe</span><span class="sxs-lookup"><span data-stu-id="b91d0-134">Orders</span></span>                           | <span data-ttu-id="b91d0-135">Entitet integracije za ugovor o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="b91d0-136">Projekti</span><span class="sxs-lookup"><span data-stu-id="b91d0-136">Projects</span></span>                         | <span data-ttu-id="b91d0-137">Entitet integracije za projekt</span><span class="sxs-lookup"><span data-stu-id="b91d0-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="b91d0-138">Reci narudžbe</span><span class="sxs-lookup"><span data-stu-id="b91d0-138">Order lines</span></span>                      | <span data-ttu-id="b91d0-139">Entitet integracije za redak ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="b91d0-140">Kontrolne točke retka ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-140">Project contract line milestones</span></span> | <span data-ttu-id="b91d0-141">Entitet integracije za kontrolnu točku retka ugovora o projektu</span><span class="sxs-lookup"><span data-stu-id="b91d0-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="b91d0-142">Tijek entiteta</span><span class="sxs-lookup"><span data-stu-id="b91d0-142">Entity flow</span></span>

<span data-ttu-id="b91d0-143">Ugovorima o projektu upravlja se u usluzi Project Service Automation, a sinkroniziraju se s Financijama kao ugovori o projektu.</span><span class="sxs-lookup"><span data-stu-id="b91d0-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="b91d0-144">Kao dio predloška integracije, za projektni ugovor možete postaviti izvor integracije u Financijama.</span><span class="sxs-lookup"><span data-stu-id="b91d0-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="b91d0-145">Projektima Vrijeme i materijal i Fiksna cijena upravlja se u usluzi Project Service Automation, a sinkroniziraju se s Financijama kao projekti.</span><span class="sxs-lookup"><span data-stu-id="b91d0-145">Time and material project and Fixed price projects are managed in Project Service Automation, and they are synchronized to Finance as projects.</span></span> <span data-ttu-id="b91d0-146">Kao dio integracije predloška, za projekt možete postaviti izvor integracije u Financijama.</span><span class="sxs-lookup"><span data-stu-id="b91d0-146">As part of the template integration, you can set the integration source in Finance for the project.</span></span>

<span data-ttu-id="b91d0-147">Redcima ugovora o projektu upravlja se u usluzi Project Service Automation, a sinkroniziraju se s Financijama kao pravila za naplatu ugovora o projektu.</span><span class="sxs-lookup"><span data-stu-id="b91d0-147">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="b91d0-148">Ako se način naplate razlikuje od zadane vrste projekta, sinkronizacija ažurira vrstu projekta za redak ugovora o projektu i grupu projekta.</span><span class="sxs-lookup"><span data-stu-id="b91d0-148">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="b91d0-149">Kontrolnim točkama redaka ugovora o projektu upravlja se u usluzi Project Service Automation, a sinkroniziraju se s Financijama kao kontrolne točke pravila za naplatu ugovora o projektu.</span><span class="sxs-lookup"><span data-stu-id="b91d0-149">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="b91d0-150">Rješenje za integraciju usluge Project Service Automation s Financijama</span><span class="sxs-lookup"><span data-stu-id="b91d0-150">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="b91d0-151">Polje **ID ugovora o projektu** dostupno je na stranici **Ugovori o projektu**.</span><span class="sxs-lookup"><span data-stu-id="b91d0-151">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="b91d0-152">Ovo je područje napravljeno kao prirodni i jedinstveni ključ za podršku integraciji.</span><span class="sxs-lookup"><span data-stu-id="b91d0-152">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="b91d0-153">Kada se stvori novi ugovor o projektu, ako vrijednost **ID ugovora o projektu** već ne postoji, automatski se generira s pomoću niza brojeva.</span><span class="sxs-lookup"><span data-stu-id="b91d0-153">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="b91d0-154">Vrijednost se sastoji od pokrate **ORD** nakon čega slijedi dodatak s nizom brojeva, a zatim sufiks od šest znakova.</span><span class="sxs-lookup"><span data-stu-id="b91d0-154">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="b91d0-155">Evo primjera: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="b91d0-155">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="b91d0-156">Polje **Broj projekta** dostupno je na stranici **Projekti**.</span><span class="sxs-lookup"><span data-stu-id="b91d0-156">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="b91d0-157">Ovo je područje napravljeno kao prirodni i jedinstveni ključ za podršku integraciji.</span><span class="sxs-lookup"><span data-stu-id="b91d0-157">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="b91d0-158">Kada se stvori novi projekt, ako vrijednost **Broj projekta** već ne postoji, automatski se generira s pomoću niza brojeva.</span><span class="sxs-lookup"><span data-stu-id="b91d0-158">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="b91d0-159">Vrijednost se sastoji od pokrate **PRJ** nakon čega slijedi dodatak s nizom brojeva, a zatim sufiks od šest znakova.</span><span class="sxs-lookup"><span data-stu-id="b91d0-159">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="b91d0-160">Evo primjera: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="b91d0-160">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="b91d0-161">Kada se primijeni rješenje integracije aplikacije Project Service Automation u Financije, skripta za nadogradnju postavlja polje **ID ugovora o projektu** za postojeće ugovore o projektu i polje **Broj projekta** za postojeće projekte u aplikaciji Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="b91d0-161">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="b91d0-162">Preduvjeti i postavljanje mapiranja</span><span class="sxs-lookup"><span data-stu-id="b91d0-162">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="b91d0-163">Prije nego što dođe do sinkronizacije ugovora o projektu i projekata, morate sinkronizirati račune.</span><span class="sxs-lookup"><span data-stu-id="b91d0-163">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="b91d0-164">U svoj skup za povezivanje dodajte mapiranje polja integracijskog ključa za **msdyn\_organizationalunits** na **msdyn\_name \[Name\]**.</span><span class="sxs-lookup"><span data-stu-id="b91d0-164">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="b91d0-165">Najprije ćete možda trebati dodati projekt u skup veza.</span><span class="sxs-lookup"><span data-stu-id="b91d0-165">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="b91d0-166">Dodatne informacije potražite u članku [Integriranje podataka s platformom Common Data Service za aplikacije](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="b91d0-166">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="b91d0-167">U svoj skup za povezivanje dodajte mapiranje polja integracijskog ključa za **msdyn\_projects** na **msdynce\_projectnumber \[Project Number\]**.</span><span class="sxs-lookup"><span data-stu-id="b91d0-167">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="b91d0-168">Najprije ćete možda trebati dodati projekt u skup veza.</span><span class="sxs-lookup"><span data-stu-id="b91d0-168">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="b91d0-169">Dodatne informacije potražite u članku [Integriranje podataka s platformom Common Data Service za aplikacije](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="b91d0-169">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="b91d0-170">**SourceDataID** za ugovore o projektu i projekte se može se ažurirati na drugu vrijednost ili ukloniti iz mapiranja.</span><span class="sxs-lookup"><span data-stu-id="b91d0-170">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="b91d0-171">Zadana vrijednost predloška je **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="b91d0-171">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="b91d0-172">Mapiranje stavke **Uvjeti plaćanja** mora se ažurirati tako da u Financijama odražava valjane uvjete plaćanja.</span><span class="sxs-lookup"><span data-stu-id="b91d0-172">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="b91d0-173">Također možete ukloniti mapiranje iz projektnog zadatka.</span><span class="sxs-lookup"><span data-stu-id="b91d0-173">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="b91d0-174">Zadana karta vrijednosti ima zadane vrijednosti za pokazne podatke.</span><span class="sxs-lookup"><span data-stu-id="b91d0-174">The default value map has default values for demo data.</span></span> <span data-ttu-id="b91d0-175">Sljedeća tablica prikazuje vrijednosti u aplikaciji Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="b91d0-175">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="b91d0-176">Value</span><span class="sxs-lookup"><span data-stu-id="b91d0-176">Value</span></span> | <span data-ttu-id="b91d0-177">Opis</span><span class="sxs-lookup"><span data-stu-id="b91d0-177">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="b91d0-178">1</span><span class="sxs-lookup"><span data-stu-id="b91d0-178">1</span></span>     | <span data-ttu-id="b91d0-179">Neto 30</span><span class="sxs-lookup"><span data-stu-id="b91d0-179">Net 30</span></span>        |
    | <span data-ttu-id="b91d0-180">2</span><span class="sxs-lookup"><span data-stu-id="b91d0-180">2</span></span>     | <span data-ttu-id="b91d0-181">2 % 10, neto 30</span><span class="sxs-lookup"><span data-stu-id="b91d0-181">2% 10, Net 30</span></span> |
    | <span data-ttu-id="b91d0-182">3</span><span class="sxs-lookup"><span data-stu-id="b91d0-182">3</span></span>     | <span data-ttu-id="b91d0-183">Neto 45</span><span class="sxs-lookup"><span data-stu-id="b91d0-183">Net 45</span></span>        |
    | <span data-ttu-id="b91d0-184">4</span><span class="sxs-lookup"><span data-stu-id="b91d0-184">4</span></span>     | <span data-ttu-id="b91d0-185">Neto 60</span><span class="sxs-lookup"><span data-stu-id="b91d0-185">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="b91d0-186">Power Query</span><span class="sxs-lookup"><span data-stu-id="b91d0-186">Power Query</span></span>

<span data-ttu-id="b91d0-187">Kako biste filtrirali podatke, morate upotrijebiti uslugu Microsoft Power Query za Excel, ako su ispunjeni sljedeći uvjeti:</span><span class="sxs-lookup"><span data-stu-id="b91d0-187">You must use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="b91d0-188">Imate prodajne naloge u aplikaciji Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="b91d0-188">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="b91d0-189">Imate više organizacijskih jedinica u aplikaciji Project Service Automation, a te će se organizacijske jedinice biti mapirati u više pravnih osoba u Financijama.</span><span class="sxs-lookup"><span data-stu-id="b91d0-189">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="b91d0-190">Ako morate upotrijebiti modul Power Query, slijedite ove smjernice:</span><span class="sxs-lookup"><span data-stu-id="b91d0-190">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="b91d0-191">Predložak Projekti i ugovori (PSA u Fin i Ops) ima zadani filtar koji uključuje samo prodajne naloge vrste **Stavka posla (msdyn\_ordertype = 192350001)**.</span><span class="sxs-lookup"><span data-stu-id="b91d0-191">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="b91d0-192">Ovaj filtar jamči da se ugovori o projektu ne stvaraju za prodajne naloge u Financijama.</span><span class="sxs-lookup"><span data-stu-id="b91d0-192">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="b91d0-193">Ako stvorite vlastiti predložak, morate dodati ovaj filtar.</span><span class="sxs-lookup"><span data-stu-id="b91d0-193">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="b91d0-194">Morate stvoriti filtar za modul Power Query koji uključuje samo ugovorne tvrtke i ustanove koje bi trebale biti sinkronizirane s pravnom osobom skupa integracijskih veza.</span><span class="sxs-lookup"><span data-stu-id="b91d0-194">You must create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="b91d0-195">Na primjer, ugovori o projektu koje imate s ugovornom organizacijskom jedinicom Contoso US trebali bi se sinkronizirati s pravnom osobom USSI, ali ugovori o projektu koje imate s ugovornom organizacijskom jedinicom Contoso Global trebali bi se sinkronizirati s pravnom osobom USMF.</span><span class="sxs-lookup"><span data-stu-id="b91d0-195">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="b91d0-196">Ako ne dodate ovaj filtar u mapiranje zadataka, svi ugovori o projektu sinkronizirat će se s pravnom osobom koja je definirana za skup veza, bez obzira na organizacijsku jedinicu iz ugovora.</span><span class="sxs-lookup"><span data-stu-id="b91d0-196">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="b91d0-197">Mapiranje predloška u integraciji podataka</span><span class="sxs-lookup"><span data-stu-id="b91d0-197">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="b91d0-198">Polja **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState** i **AddressZipCode** nisu uključena u zadano mapiranje za ugovore o projektu.</span><span class="sxs-lookup"><span data-stu-id="b91d0-198">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="b91d0-199">Mapiranja možete dodati ako želite da se ti podaci sinkroniziraju za ugovore o projektu.</span><span class="sxs-lookup"><span data-stu-id="b91d0-199">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="b91d0-200">Polja **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, i **ProjectType** nisu uključena u zadano mapiranje za projekte.</span><span class="sxs-lookup"><span data-stu-id="b91d0-200">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="b91d0-201">Mapiranja možete dodati ako želite da se ti podaci sinkroniziraju za projekte.</span><span class="sxs-lookup"><span data-stu-id="b91d0-201">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="b91d0-202">Sljedeće slike prikazuju primjer mapiranja zadataka predloška u Integraciji podataka.</span><span class="sxs-lookup"><span data-stu-id="b91d0-202">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="b91d0-203">Mapiranje prikazuje podatke polja koji će se sinkronizirati iz aplikacije Project Service Automation u Financije.</span><span class="sxs-lookup"><span data-stu-id="b91d0-203">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="b91d0-204">[![Mapiranje predloška](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="b91d0-204">[![Template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="b91d0-205">[![Mapiranje predloška](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="b91d0-205">[![Template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="b91d0-206">[![Mapiranje predloška](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="b91d0-206">[![Template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="b91d0-207">[![Mapiranje predloška](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="b91d0-207">[![Template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="b91d0-208">Mapiranje kontrolnih točaka retka ugovora o projektu u projektima i ugovorima (PSA 3.x za Dynamics) – predložak v2:</span><span class="sxs-lookup"><span data-stu-id="b91d0-208">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="b91d0-209">[![Mapiranje predloška](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="b91d0-209">[![Template mapping](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
